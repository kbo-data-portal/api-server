{% extends 'layout/base.html' %}

{% block content %}

<div id="wrap">

  {% include 'layout/header.html' %}

  <hr />

  <section id="LiveRelay" class="">
    <div class="game-schedule">
      <div class="tab-league">
        <ul class="tab three">
          <li class="tab-main-tit on" le-id="1" sr-id="0" id="leagueRegular">
            <a href="#none">KBO 정규시즌</a>
          </li>
          <li class="tab-main-tit tab-main-fl" le-id="2" sr-id="0,1,10,15" id="leagueFutures">
            <a href="#none">KBO 퓨처스리그</a>
          </li>
        </ul>
      </div>
      <div class="today-game">
        <div class="bx-wrapper">
          <div class="bx-viewport">
            <ul class="game-list-n">
              {% for game in games %}
              <li class="game-cont" data-game-id="{{ game.G_ID }}">
                <div class="wrap">
                  <div class="top">
                    <ul>
                      <li>{{ game.G_DT_TXT }}</li>
                    </ul>
                  </div>
                  <div class="middle">
                    <div class="broadcasting">{{ game.G_TM }}</div>
                    <p class="staus">{{ game.S_NM }}</p>
                    <div class="info">
                      <div class="team away">
                        <div class="emb">
                          <img
                            src="//6ptotvmi5753.edge.naverncp.com/KBO_IMAGE/KBOHome/resources/images/emblem/regular/{{ game.SEASON_ID }}/emblem_{{ game.AWAY_ID }}.png"
                            alt="{{ game.AWAY_NM }}" />
                        </div>
                        <div class="today-pitcher">
                          <p>
                            <span class="before">선</span>{{ game.T_PIT_P_NM }}
                          </p>
                        </div>
                      </div>
                      <div class="vs">VS</div>
                      <div class="team home">
                        <div class="emb">
                          <img
                            src="//6ptotvmi5753.edge.naverncp.com/KBO_IMAGE/KBOHome/resources/images/emblem/regular/{{ game.SEASON_ID }}/emblem_{{ game.HOME_ID }}.png"
                            alt="{{ game.HOME_NM }}" />
                        </div>
                        <div class="today-pitcher">
                          <p>
                            <span class="before">선</span>{{ game.B_PIT_P_NM }}
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
          <div class="bx-controls bx-has-controls-direction">
            <div class="bx-controls-direction">
              <a class="bx-prev" href="">Prev</a><a class="bx-next" href="">Next</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="game-info">
      <div class="game-info-bg">
        <div class="match-box"></div>
        <div class="info-area">
          <div class="team away info"></div>
          <div class="vs">VS</div>
          <div class="team home info"></div>
        </div>
        <div class="stat-area-top">
          <div class="stat-area-twobox">
            <div class="graph-title">통산전적</div>
            <div class="graph-twobox">
              <div class="graph" id="graph-all-match-left"></div>
              <div class="graph" id="graph-all-match-right"></div>
            </div>
          </div>
          <div class="stat-area-match">
            <div class="graph-title">최근 5경기 맞대결</div>
            <ul class="match-list"></ul>
          </div>
          <div class="stat-area-twobox">
            <div class="graph-title">시즌전적</div>
            <div class="graph-twobox">
              <div class="graph" id="graph-match-left"></div>
              <div class="graph" id="graph-match-right"></div>
            </div>
          </div>
        </div>
        <div class="stat-area-bottom">
          <div class="stat-area-button">
            <button type="button" class="stat-button" id="btnAttFlag">타격</button>
            <button type="button" class="stat-button" id="btnPassFlag">투구</button>
            <button type="button" class="stat-button" id="btnDefFlag">수비</button>
          </div>
          <div class="stat-area-twobox">
            <div class="graph-stat">
              <div class="graph" id="graph-stat-leftL" style="width: 225px"></div>
              <div class="graph" id="graph-stat-leftR"></div>
            </div>
            <div class="graph-stat">
              <div class="graph" id="graph-stat-rightL" style="width: 225px"></div>
              <div class="graph" id="graph-stat-rightR"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="score-info">
      <div class="score-info-left">
        <div class="score-title">팀순위표</div>
        <table id="tblTeamRank" class="tbl">
          <thead>
            <tr>
              <th>순위</th>
              <th>팀명</th>
              <th>경기</th>
              <th>승</th>
              <th>패</th>
              <th>무</th>
              <th>승률</th>
              <th>게임차</th>
              <th>연속</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>
                <span class="team-name">LG</span>
              </td>
              <td>17</td>
              <td>14</td>
              <td>3</td>
              <td>0</td>
              <td>0.824</td>
              <td>-</td>
              <td>1패</td>
            </tr>
            <tr>
              <td>2</td>
              <td>
                <span class="team-name">SSG</span>
              </td>
              <td>15</td>
              <td>9</td>
              <td>6</td>
              <td>0</td>
              <td>0.600</td>
              <td>4</td>
              <td>1패</td>
            </tr>
            <tr>
              <td>3</td>
              <td>
                <span class="team-name">KT</span>
              </td>
              <td>17</td>
              <td>9</td>
              <td>7</td>
              <td>1</td>
              <td>0.563</td>
              <td>4.5</td>
              <td>2승</td>
            </tr>
            <tr>
              <td>4</td>
              <td>
                <span class="team-name">삼성</span>
              </td>
              <td>18</td>
              <td>10</td>
              <td>8</td>
              <td>0</td>
              <td>0.556</td>
              <td>4.5</td>
              <td>2패</td>
            </tr>
            <tr>
              <td>5</td>
              <td>
                <span class="team-name">롯데</span>
              </td>
              <td>19</td>
              <td>8</td>
              <td>10</td>
              <td>1</td>
              <td>0.444</td>
              <td>6.5</td>
              <td>1패</td>
            </tr>
            <tr>
              <td>6</td>
              <td>
                <span class="team-name">NC</span>
              </td>
              <td>16</td>
              <td>7</td>
              <td>9</td>
              <td>0</td>
              <td>0.438</td>
              <td>6.5</td>
              <td>1승</td>
            </tr>
            <tr>
              <td>7</td>
              <td>
                <span class="team-name">두산</span>
              </td>
              <td>19</td>
              <td>8</td>
              <td>11</td>
              <td>0</td>
              <td>0.421</td>
              <td>7</td>
              <td>1승</td>
            </tr>
            <tr>
              <td>7</td>
              <td>
                <span class="team-name">한화</span>
              </td>
              <td>19</td>
              <td>8</td>
              <td>11</td>
              <td>0</td>
              <td>0.421</td>
              <td>7</td>
              <td>1승</td>
            </tr>
            <tr>
              <td>9</td>
              <td>
                <span class="team-name">KIA</span>
              </td>
              <td>17</td>
              <td>7</td>
              <td>10</td>
              <td>0</td>
              <td>0.412</td>
              <td>7</td>
              <td>1승</td>
            </tr>
            <tr>
              <td>10</td>
              <td>
                <span class="team-name">키움</span>
              </td>
              <td>19</td>
              <td>7</td>
              <td>12</td>
              <td>0</td>
              <td>0.368</td>
              <td>8</td>
              <td>1패</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="score-info-right">
        <div class="score-info-right-top">
          <div class="score-title">타자순위</div>
          <div class="top-player">
            <span class="player-img">
              <img class="team" alt=""
                src="//6ptotvmi5753.edge.naverncp.com/KBO_IMAGE/emblem/regular/2025/player_HH.png" />
              <img src="//6ptotvmi5753.edge.naverncp.com/KBO_IMAGE/person/kbo/2025/61666.png" alt="한승혁"
                onerror="this.src='//6ptotvmi5753.edge.naverncp.com/KBO_IMAGE/KBOHome/resources/images/common/noImage_player.png';" />
            </span>
            <div class="player">
              <div class="title">한화 이글스</div>
              <div class="score">한승혁</div>
            </div>
            <div class="record">
              <ul>
                <li class="title">득점</li>
                <li class="score">6</li>
              </ul>
              <ul>
                <li class="title">득점</li>
                <li class="score">6</li>
              </ul>
              <ul>
                <li class="title">득점</li>
                <li class="score">6</li>
              </ul>
            </div>
          </div>
          <table id="tblPitcherRank" class="tbl tbl-rank">
            <thead>
              <tr>
                <th>순위</th>
                <th>선수</th>
                <th>팀명</th>
                <th>득점</th>
                <th>경기당</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2</td>
                <td>이대호</td>
                <td>
                  <span class="team-name">SSG</span>
                </td>
                <td>0</td>
                <td>0.600</td>
              </tr>
              <tr>
                <td>3</td>
                <td>김광현</td>
                <td>
                  <span class="team-name">KT</span>
                </td>
                <td>1</td>
                <td>0.563</td>
              </tr>
              <tr>
                <td>4</td>
                <td>추신수</td>
                <td>
                  <span class="team-name">삼성</span>
                </td>
                <td>0</td>
                <td>0.556</td>
              </tr>
              <tr>
                <td>5</td>
                <td>류현진</td>
                <td>
                  <span class="team-name">LG</span>
                </td>
                <td>0</td>
                <td>0.824</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="score-info-right-bottom">
          <div class="score-title">투수순위</div>
          <div class="top-player">
            <span class="player-img">
              <img class="team" alt=""
                src="//6ptotvmi5753.edge.naverncp.com/KBO_IMAGE/emblem/regular/2025/player_HH.png" />
              <img src="//6ptotvmi5753.edge.naverncp.com/KBO_IMAGE/person/kbo/2025/61666.png" alt="한승혁"
                onerror="this.src='//6ptotvmi5753.edge.naverncp.com/KBO_IMAGE/KBOHome/resources/images/common/noImage_player.png';" />
            </span>
            <div class="player">
              <div class="title">한화 이글스</div>
              <div class="score">한승혁</div>
            </div>
            <div class="record">
              <ul>
                <li class="title">득점</li>
                <li class="score">6</li>
              </ul>
              <ul>
                <li class="title">득점</li>
                <li class="score">6</li>
              </ul>
              <ul>
                <li class="title">득점</li>
                <li class="score">6</li>
              </ul>
            </div>
          </div>
          <table id="tblPitcherRank" class="tbl tbl-rank">
            <thead>
              <tr>
                <th>순위</th>
                <th>선수</th>
                <th>팀명</th>
                <th>득점</th>
                <th>경기당</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2</td>
                <td>이대호</td>
                <td>
                  <span class="team-name">SSG</span>
                </td>
                <td>0</td>
                <td>0.600</td>
              </tr>
              <tr>
                <td>3</td>
                <td>김광현</td>
                <td>
                  <span class="team-name">KT</span>
                </td>
                <td>1</td>
                <td>0.563</td>
              </tr>
              <tr>
                <td>4</td>
                <td>추신수</td>
                <td>
                  <span class="team-name">삼성</span>
                </td>
                <td>0</td>
                <td>0.556</td>
              </tr>
              <tr>
                <td>5</td>
                <td>윤석민</td>
                <td>
                  <span class="team-name">롯데</span>
                </td>
                <td>1</td>
                <td>0.444</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <hr />

  <script>
    const homeColor = '{{ home_color }}'
    const awayColor = '{{ away_color }}'
    const itemsPerPage = 5
    const slides = document.querySelectorAll('.game-cont')
    const track = document.querySelector('.game-list-n')
    const totalPages = Math.ceil(slides.length / itemsPerPage)
    let currentPage = 3

    const prevBtn = document.querySelector('.bx-prev')
    const nextBtn = document.querySelector('.bx-next')

    function updateSlider() {
      if (currentPage === 1) {
        prevBtn.style.display = 'none'
      } else {
        prevBtn.style.display = 'block'
      }
      if (currentPage === totalPages) {
        nextBtn.style.display = 'none'
      } else {
        nextBtn.style.display = 'block'
      }
      const offset = (currentPage - 1) * 1050
      track.style.transform = `translateX(-${offset}px)`
    }

    prevBtn.addEventListener('click', (e) => {
      e.preventDefault()
      if (currentPage > 1) {
        currentPage--
        updateSlider()
      }
    })

    nextBtn.addEventListener('click', (e) => {
      e.preventDefault()
      if (currentPage < totalPages) {
        currentPage++
        updateSlider()
      }
    })

    updateSlider()
  </script>
  <script src="static/js/chart.js" type="text/javascript"></script>
  <script src="static/js/script.js" type="text/javascript"></script>

  {% include 'layout/footer.html' %}

</div>

{% endblock %}